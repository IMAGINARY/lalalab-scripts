#!/usr/bin/env bash

if [ "$UID" -ne 0 ]
then
    >&2 echo "This script requires superuser priviledges."
    exit 1
fi

# Target version
COMMITISH="fa51d6d34aee7d1fac64d05e06800c5524e0a6bc"

# Make sure the folder exists
INSTALL_DIR="/opt/spectrum-analyzer"
mkdir -p "$INSTALL_DIR"

cd "$INSTALL_DIR"
git init
git remote remove origin &> /dev/null || true
git remote add origin https://github.com/CindyJS/SpectrumAnalyser.git
git fetch --tags origin
git reset --hard origin/master
git checkout "$COMMITISH"
